<div class="content-wrap">
	<form class="checkout layout-gt-sm-row layout-align-space-between-start flex">
		<main class="checkout__container md-whiteframe-z1" flex layout-margin>
			<h1 class="checkout__heading md-headline">Checkout</h1>

			<ol class="unstyled-list">
				<li class="checkout__form-section layout-gt-md-row">
					<h2 class="checkout__form-section__heading md-subhead flex-gt-md-25">Delivery address</h2>
					<div class="checkout__form-section__fields flex">
						<address-summary address="vm.checkout.delivery_address"></address-summary>
						<md-button class="md-primary align-text" style="margin-top: -4px" ng-click="vm.editAddress($event, 'delivery')">Edit address</md-button>
					</div>
				</li>
				<li class="checkout__form-section layout-gt-md-row">
					<h2 class="checkout__form-section__heading md-subhead flex-gt-md-25">Delivery window</h2>
					<div class="checkout__form-section__fields flex">
						<ul class="unstyled-list">
							<li class="checkout__delivery-window" ng-repeat="order_form in vm.checkout.basket.order_forms track by order_form.supplier">
								<div class="layout-row layout-align-start-center md-accent-panel">
									<div class="supplier-logo" style="margin: 10px 20px;">
										<img ng-src="{{ ::vm.getLogoForSupplier(order_form.supplier) }}" height="40" width="40" alt />
									</div>
									<h3 class="md-subhead" ng-bind="::order_form.supplier"></h3>
								</div>

								<div class="delivery-calendar md-whiteframe-z2" ng-show="vm.showOptions === order_form.supplier">
									<div class="delivery-calendar__header layout-row layout-align-center">
										<md-button class="calendar-date" ng-repeat="delivery in ::vm.deliveryDates[order_form.supplier] track by delivery.date" ng-click="vm.showDay = delivery.date" ng-class="{'md-primary': vm.showDay === delivery.date}" aria-label="{{ ::delivery.display_name }}">
											<span class="calendar-date__day" ng-bind="::delivery.display_name.split(',')[0]"></span>
											<span class="calendar-date__date" ng-bind="::delivery.date | date: 'd'"></span>
										</md-button>
									</div>

									<div class="delivery-calendar__options">
										<div ng-repeat="delivery in ::vm.deliveryDates[order_form.supplier] track by delivery.date" ng-show="vm.showDay === delivery.date">
											<md-list>
												<md-list-item ng-repeat="window in ::delivery.windows track by $index" style="position: relative;">
													<md-button class="md-no-style" ng-class="{'md-primary': order_form.delivery_window === window}" ng-click="vm.selectWindow(order_form, window)" ng-disabled="!window.available">
														<div class="layout-row">
															<span ng-bind="::($index === 0 ? window.date_display_name + ', ' : '') + window.display_name"></span>
															<span class="flex"></span>
															<span ng-show="::window.available" ng-bind="::window.price | currency: '£'"></span>
															<span ng-hide="::window.available">SOLD OUT</span>
														</div>
													</md-button>
													<md-divider ng-if="::$first"></md-divider>
												</md-list-item>
											</md-list>
										</div>
									</div>
								</div>

								<div class="checkout__delivery-option">
									<md-icon md-svg-src="assets/images/icons/event.svg"></md-icon>
									<span class="checkout__delivery-option__current"><span ng-bind="order_form.delivery_window.date_display_name"></span>, <span ng-bind="order_form.delivery_window.display_name"></span> (<span ng-bind="order_form.delivery_window.price | currency: '£'"></span>)</span>
									<md-button class="md-primary" ng-click="vm.changeWindow(order_form)">Change window</md-button>
								</div>

								<div class="checkout__sign-option layout-gt-sm-row layout-align-start-center">
									<span>Sign for delivery?</span>
									<md-radio-group ng-model="order_form.sign_for" class="md-primary layout-gt-sm-row">
										<md-radio-button ng-value="true">Yes</md-radio-button>
										<md-radio-button ng-value="false">No</md-radio-button>
									</md-radio-group>
								</div>
							</li>
						</ul>
					</div>
				</li>
				<li class="checkout__form-section layout-gt-md-row">
					<h2 class="checkout__form-section__heading md-subhead flex-gt-md-25">Payment</h2>
					<div class="checkout__form-section__fields flex">[form fields]</div>
				</li>
			</ol>
		</main>

		<aside class="checkout__container checkout__summary md-whiteframe-z1" layout-margin>
			<h2 class="checkout__heading md-headline">Order Summary</h2>
			<table class="checkout__summary__details">
				<tbody>
					<tr>
						<th scope="row">Item(s)</th>
						<td ng-bind="vm.checkout.basket.subtotal | currency: '£'"></td>
					</tr>
					<tr>
						<th scope="row">Estimated tax</th>
						<td ng-bind="vm.checkout.basket.tax | currency: '£'"></td>
					</tr>
					<tr>
						<th scope="row">Delivery</th>
						<td>
							<span ng-show="!vm.checkout.basket.shipping_total && vm.checkout.basket.shipping_total !== 0">--</span>
							<span ng-show="vm.checkout.basket.shipping_total === 0">FREE</span>
							<span ng-show="vm.checkout.basket.shipping_total > 0" ng-bind="vm.checkout.basket.shipping_total | currency: '£'"></span>
						</td>
					</tr>
				</tbody>
				<tfoot class="checkout__summary__total">
					<tr>
						<th scope="row">Estimated total</th>
						<td ng-bind="vm.checkout.basket.total | currency: '£'"></td>
					</tr>
				</tfoot>
			</table>
			<md-button class="checkout__action md-primary md-raised">Place order</md-button>
		</aside>
	</form>
</div>
